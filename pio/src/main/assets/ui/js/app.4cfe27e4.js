(function(e){function t(t){for(var i,a,r=t[0],c=t[1],l=t[2],d=0,f=[];d<r.length;d++)a=r[d],o[a]&&f.push(o[a][0]),o[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},o={app:0},s=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0747":function(e,t,n){},"48e1":function(e,t,n){"use strict";var i=n("f9c4"),o=n.n(i);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=(n("df49"),n("e7bd")),s=n("0c29"),a=n("ae0c"),r=n("7ced");i["a"].use(o["a"]),i["a"].use(s["a"]),i["a"].use(a["a"]),i["a"].use(r["a"]);var c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("keep-alive",[n("router-view")],1)},l=[],u=n("2877"),d={},f=Object(u["a"])(d,c,l,!1,null,null,null),h=f.exports,v=(n("5cfb"),n("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("cube-button",{on:{click:e.syncRunTest}},[e._v("同步执行脚本")]),n("cube-button",{on:{click:e.asyncRunTest}},[e._v("异步执行脚本")]),n("div",{staticClass:"shell-log-view"},e._l(e.logs,function(t,i){return n("div",{key:i,domProps:{innerHTML:e._s(t)}})}),0)],1)},g=[],m={data:function(){return{logs:["# 脚本执行器"]}},methods:{syncRunTest:function(){if(confirm("确定要用 KrScriptCore 执行脚本代码吗？"))try{var e=KrScriptEngine.executeShell("echo 'hello world！'");alert("执行结果："+e)}catch(t){alert("KrScriptEngine 异常："+t.message)}},asyncRunTest:function(){var e=this;try{var t=KrScriptEngine.executeShellAsync("echo 'hello world！'",function(t){e.logs.push('<b style="color: #555">'+t+"</b>")},function(t){e.logs.push('<b style="color: #d00">'+t+"</b>")},function(t){e.logs.push('<b style="color: #5d5">完成：'+t+"</b>")});this.logs.push("开始运行："+t)}catch(n){alert("KrScriptEngine 异常："+n.message)}}}},b=m,w=(n("89f1"),Object(u["a"])(b,p,g,!1,null,null,null)),y=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page"},[n("div",{staticClass:"top-background",style:e.backgroundColor()}),e._m(0),n("label",{staticClass:"file-picker",on:{click:e.chooseFile}}),n("div",{staticClass:"header"},[n("h2",[e._v("屏幕刷新率切换")]),n("h5",[e._v("当前设备："+e._s(e.deviceName)+"("+e._s(e.deviceModel)+") "+e._s(e.currentRefreshRate)+"Hz")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.customImageFile,expression:"customImageFile"}],staticClass:"custom-file-info"},[n("div",{staticClass:"custom-file-title"},[e._v("已选择自定义文件")]),n("div",{staticClass:"custom-file-path"},[e._v("路径："+e._s(e.customImageFile))]),n("div",{staticClass:"custom-file-warning"},[e._v("注意：本应用无法校验所选文件的有效性，如果你选择了无效的文件，刷入后会无法开机！")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.customImageFile,expression:"!customImageFile"}],class:"options"+(e.options.length%2==1?" options-odd":"")},e._l(e.options,function(t,i){return n("div",{key:i,class:{selected:e.isSelected(t.value)},on:{touchend:e.touchUp,touchstart:function(n){return e.chooseOption(t)}}},[n("div",{style:{backgroundColor:t.color}},[n("div",{staticClass:"option-info"},[n("div",[e._v(e._s(t.title))]),n("div")]),n("div",[n("span",{staticClass:"freq-number"},[e._v(e._s(t.value))]),n("span",[e._v("Hz")])])])])}),0),n("div",{staticClass:"shell-log-view"},e._l(e.logs,function(t,i){return n("div",{key:i,domProps:{innerHTML:e._s(t)}})}),0),n("div",{staticStyle:{display:"inline-block"}},[n("cube-checkbox",{model:{value:e.autoReboot,callback:function(t){e.autoReboot=t},expression:"autoReboot"}},[e._v("\n      自动重启\n    ")])],1),n("div",{staticClass:"desc"},[e.autoReboot?n("div",[e._v("切换完成后，自动重启手机")]):n("div",[e._v("切换完成后需要手动重启")])]),n("cube-button",{staticClass:"button-applay",style:e.backgroundColor(),attrs:{light:!1},on:{click:e.applyRefreshRate}},[e._v("应用")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-mask"},[n("cube-loading",{attrs:{size:40}})],1)],1)},_=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"author"},[n("div",[e._v("作者: ETO(底层) | SKI(UI)")]),n("div",[n("small",[e._v("未经允许不得擅自搬运和转载~")])])])}],C=(n("a481"),n("aef6"),{data:function(){return{deviceName:"",deviceModel:"",sdkInt:0,currentRefreshRate:60,customImageFile:"",loading:!1,options:[{title:"默认",desc:"",value:60,color:"#00d5d9"},{title:"稳定",desc:"",value:72,color:"#87cb00"},{title:"发烧",desc:"",value:84,color:"#fc8a1b"},{title:"极限",desc:"",value:90,color:"#f9592f"}],selectedOption:null,autoReboot:!0,logs:[]}},created:function(){var e=this;if(window.ExtendedInterface&&window.ExtendedInterface){this.deviceName=window.ExtendedInterface.deviceName(),this.deviceModel=window.ExtendedInterface.deviceModel(),this.currentRefreshRate=window.ExtendedInterface.currentRefreshRate(),this.sdkInt=window.ExtendedInterface.sdkInt();var t=window.ExtendedInterface.getOptions();t?this.options="string"==typeof t?JSON.parse(t):t:alert("获取配置信息失败~"),this.selectedOption=this.options.filter(function(t){return t.value==e.currentRefreshRate})[0]}else alert("异常，无法获取当前屏幕刷新率~")},methods:{chooseFile:function(){var e=this;window.chooseFileCallback=function(t){var n=t&&t.absPath;n&&(e.customImageFile=n,e.autoReboot=!1)},window.ExtendedInterface.chooseFile("window.chooseFileCallback")},touchUp:function(){navigator.vibrate?navigator.vibrate(20):navigator.webkitVibrate&&navigator.webkitVibrate(20)},chooseOption:function(e){this.customImageFile="",this.selectedOption=e,navigator.vibrate?navigator.vibrate(40):navigator.webkitVibrate&&navigator.webkitVibrate(40)},applyRefreshRate:function(){if(this.customImageFile)this.applyCustomDtImage();else try{if(this.loading=!0,this.touchUp(),this.deviceModel)if(this.selectedOption&&this.selectedOption.value){var e=this.selectedOption.value,t=this.deviceModel,n=this.sdkInt,i=this.selectedOption.resource,o=KrScriptEngine.extractAssets(i||"file:///android_asset/eto/".concat(t,"/sdk").concat(n,"/").concat(e,".img"));o?this.flashImage(o):alert("所需的资源文件已丢失或不支持当前设备~")}else alert("请先选择要切换的刷新率！");else alert("当前设备型号未知，无法进行切换~")}finally{this.loading=!1}},applyCustomDtImage:function(){if(this.customImageFile&&this.customImageFile.endsWith(".img"))if(confirm("本应用无法确保你所选的文件是否有效，刷入无效的文件，会导致手机无法开机，确定继续刷入吗？")){this.loading=!0;try{this.flashImage(this.customImageFile)}catch(e){}finally{this.loading=!1}}else this.customImageFile="";else alert("你需要选择一个有效的镜像文件，以.img结尾的文件名~")},flashImage:function(e){if(KrScriptEngine.rootCheck()){var t="dd if='".concat(e.replace(/'/g,"\\'"),"' of=/dev/block/by-name/dtbo");KrScriptEngine.executeShell(t),this.autoReboot?(setTimeout(function(){alert("操作完成，即将自动重启~")},10),setTimeout(function(){KrScriptEngine.executeShell("sync\nsleep 2\nreboot")},200)):alert("操作完成，请手动重启手机~")}else alert("没有ROOT还想玩机，做梦吧你！")},isSelected:function(e){return!(!this.selectedOption||!this.selectedOption.value)&&e==this.selectedOption.value},backgroundColor:function(){if(this.selectedOption&&this.selectedOption.color)return{backgroundColor:this.selectedOption.color}},onCustomImageFileChange:function(e){this.customImageFile=e.currentTarget.value}}}),S=C,I=(n("48e1"),Object(u["a"])(S,k,_,!1,null,null,null)),x=I.exports,O=[{path:"/",component:x,name:"RefreshRatio"},{path:"/home",component:y,name:"home"}];i["a"].config.productionTip=!1,i["a"].use(v["a"]),window.KrScriptEngine={executeShell:function(e){return"string"==typeof e?window.KrScriptCore.executeShell(e):"boolean"==typeof e?!!e:""},executeShellAsync:function(e,t,n,i){return window.TaskSupervisorCallback=function(e){if(e)switch(e.type){case 2:t&&t instanceof Function&&t(e.message);break;case 4:n&&n instanceof Function&&n(e.message);break;case-2:i&&i instanceof Function&&i(e.message);break;default:alert("未知输出："+JSON.stringify(e));break}},"string"==typeof e?window.KrScriptCore.executeShellAsync(e,"window.TaskSupervisorCallback"):"boolean"==typeof e?!!e:""},extractAssets:function(e){return e&&"string"==typeof e&&window.KrScriptCore.extractAssets(e)||null},rootCheck:function(){return window.KrScriptCore.rootCheck()}};var R=new v["a"]({routes:O});new i["a"]({router:R,render:function(e){return e(h)}}).$mount("#app")},"89f1":function(e,t,n){"use strict";var i=n("0747"),o=n.n(i);o.a},f9c4:function(e,t,n){}});