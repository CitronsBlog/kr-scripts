(function(e){function t(t){for(var o,a,s=t[0],c=t[1],l=t[2],d=0,f=[];d<s.length;d++)a=s[d],n[a]&&f.push(n[a][0]),n[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],o=!0,s=1;s<i.length;s++){var c=i[s];0!==n[c]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var o={},n={app:0},r=[];function a(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=o,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(i,o,function(t){return e[t]}.bind(null,o));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"56d7":function(e,t,i){"use strict";i.r(t);i("8e6e"),i("ac6a"),i("456d");var o=i("bd86"),n=(i("cadf"),i("551c"),i("f751"),i("097d"),i("2b0e")),r=(i("df49"),i("e7bd")),a=i("0c29"),s=i("ae0c"),c=i("7ced");n["a"].use(r["a"]),n["a"].use(a["a"]),n["a"].use(s["a"]),n["a"].use(c["a"]);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("keep-alive",[i("router-view")],1)},u=[],d=i("2877"),f={},p=Object(d["a"])(f,l,u,!1,null,null,null),v=p.exports,h=(i("5cfb"),i("8c4f")),b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-official"},[i("div",{staticClass:"top-background",style:e.backgroundColor()}),i("div",{staticClass:"author"},[e._m(0),i("br"),i("div",[e._v("作者: "+e._s(e.author)+"(底层) | SKI(UI)")]),e._m(1),i("div",{on:{click:e.refreshRatetest}},[e._v("【帧率测试，点这里】")])]),i("label",{staticClass:"file-picker",on:{click:e.chooseFile}}),i("div",{staticClass:"header"},[i("h2",[e._v("屏幕刷新率切换")]),i("h5",[e._v("当前设备："+e._s(e.deviceName)+"("+e._s(e.deviceModel)+") "+e._s(e.currentRefreshRate)+"Hz")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.customImageFile,expression:"customImageFile"}],staticClass:"custom-file-info"},[i("div",{staticClass:"custom-file-title"},[e._v("已选择自定义文件")]),i("div",{staticClass:"custom-file-path"},[e._v("镜像路径："+e._s(e.customImageFile))]),i("div",{staticClass:"custom-file-path"},[e._v("目标分区：/dev/block/by-name/dtbo")]),i("div",{staticClass:"custom-file-warning"},[e._v("注意：本应用无法校验所选文件的有效性，如果你选择了无效的文件，刷入后会无法开机！")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.customImageFile,expression:"!customImageFile"}],class:"options"+(e.options.length%2==1?" options-odd":"")},e._l(e.options,function(t,o){return i("div",{key:o,class:{selected:e.isSelected(t.value)},on:{touchend:e.touchUp,touchstart:function(i){return e.chooseOption(t)}}},[i("div",{style:{backgroundColor:t.color}},[i("div",{staticClass:"option-info"},[i("div",[e._v(e._s(t.title))]),i("div")]),i("div",[i("span",{staticClass:"freq-number"},[e._v(e._s(t.value))]),i("span",[e._v("Hz")])])])])}),0),i("div",{staticStyle:{display:"inline-block"}},[i("cube-checkbox",{model:{value:e.autoReboot,callback:function(t){e.autoReboot=t},expression:"autoReboot"}},[e._v("\n      自动重启\n    ")])],1),i("div",{staticClass:"desc"},[e.autoReboot?i("div",[e._v("切换完成后，自动重启手机")]):i("div",[e._v("切换完成后需要手动重启")])]),i("cube-button",{staticClass:"button-applay",style:e.backgroundColor(),attrs:{light:!1},on:{click:e.applyRefreshRate}},[e._v("应用")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"loading-mask"},[i("cube-loading",{attrs:{size:40}})],1)],1)},m=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("small",[e._v("如果调高刷新率后，出现以下状况")]),i("br"),i("small",[e._v("【卡顿、黑屏、偏色、闪烁】")]),i("br"),i("small",[e._v("请降低刷新率")])])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("small",[e._v("未经允许不得擅自搬运和转载~")])])}],g=(i("a481"),i("aef6"),{data:function(){return{deviceName:"",deviceModel:"",sdkInt:0,currentRefreshRate:60,author:"NONE",customImageFile:"",loading:!1,officialSupported:!1,options:[{title:"默认",desc:"",value:60,color:"#00d5d9"},{title:"稳定",desc:"",value:72,color:"#87cb00"},{title:"发烧",desc:"",value:84,color:"#fc8a1b"},{title:"极限",desc:"",value:90,color:"#f9592f"}],selectedOption:null,autoReboot:!0}},created:function(){var e=this;if(window.ExtendedInterface&&window.ExtendedInterface){this.deviceName=window.ExtendedInterface.deviceName(),this.deviceModel=window.ExtendedInterface.deviceModel(),this.currentRefreshRate=window.ExtendedInterface.currentRefreshRate(),this.sdkInt=window.ExtendedInterface.sdkInt();var t=window.ExtendedInterface.getOptions();if(t){var i="string"==typeof t?JSON.parse(t):t;this.officialSupported=!0,this.options=i.options||[],this.author=i.author||"NONE"}else this.officialSupported=!1;this.selectedOption=this.options.filter(function(t){return t.value==e.currentRefreshRate})[0]}else alert("异常，无法获取当前屏幕刷新率~")},methods:{refreshRatetest:function(){window.open("https://testufo.com")},chooseFile:function(){var e=this;window.chooseFileCallback=function(t){var i=t&&t.absPath;i&&(e.customImageFile=i,e.autoReboot=!1)},window.ExtendedInterface.chooseFile("window.chooseFileCallback")},touchUp:function(){navigator.vibrate?navigator.vibrate(20):navigator.webkitVibrate&&navigator.webkitVibrate(20)},chooseOption:function(e){this.customImageFile="",this.selectedOption=e,navigator.vibrate?navigator.vibrate(40):navigator.webkitVibrate&&navigator.webkitVibrate(40)},applyRefreshRate:function(){if(this.customImageFile)this.applyCustomDtImage();else try{if(this.loading=!0,this.touchUp(),this.deviceModel)if(this.selectedOption&&this.selectedOption.value){var e=this.selectedOption.value,t=this.deviceModel,i=this.sdkInt,o=this.selectedOption.resource,n=KrScriptEngine.extractAssets(o||"file:///android_asset/dtbo/".concat(t,"/sdk").concat(i,"/").concat(e,".img"));n?this.flashImage(n):this.officialSupported?alert("所需的资源文件已丢失或不支持当前设备~"):alert("本应用还未适配你的手机，如需刷入自定义的dtbo分区镜像，请点击左上角的图标选择文件~")}else alert("请先选择要切换的刷新率！");else alert("当前设备型号未知，无法进行切换~")}finally{this.loading=!1}},applyCustomDtImage:function(){if(this.customImageFile&&this.customImageFile.endsWith(".img"))if(confirm("本应用无法确保你所选的文件是否有效，刷入无效的文件，会导致手机无法开机，确定继续刷入吗？")){this.loading=!0;try{this.flashImage(this.customImageFile)}catch(e){}finally{this.loading=!1}}else this.customImageFile="";else alert("你需要选择一个有效的镜像文件，以.img结尾的文件名~")},flashImage:function(e){if(KrScriptEngine.rootCheck()){var t="dd if='".concat(e.replace(/'/g,"\\'"),"' of=/dev/block/by-name/dtbo");KrScriptEngine.executeShell(t),this.autoReboot?(setTimeout(function(){alert("操作完成，即将自动重启~")},10),setTimeout(function(){KrScriptEngine.executeShell("sync\nsleep 2\nreboot")},200)):alert("操作完成，请手动重启手机~")}else alert("没有ROOT还想玩机，做梦吧你！")},isSelected:function(e){return!(!this.selectedOption||!this.selectedOption.value)&&e==this.selectedOption.value},backgroundColor:function(){if(this.selectedOption&&this.selectedOption.color)return{backgroundColor:this.selectedOption.color}}}}),w=g,y=(i("9793"),Object(d["a"])(w,b,m,!1,null,null,null)),O=y.exports,k=[{path:"/",component:O,name:"OfficialPage"}];function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(i,!0).forEach(function(t){Object(o["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}n["a"].config.productionTip=!1,n["a"].use(h["a"]),window.KrScriptEngine={executeShell:function(e){return"string"==typeof e?window.KrScriptCore.executeShell(e):"boolean"==typeof e?!!e:""},executeShellAsync:function(e,t,i,o,n){return window.TaskSupervisorCallback=function(e){if(e)switch(e.type){case 2:t&&t instanceof Function&&t(e.message);break;case 4:i&&i instanceof Function&&i(e.message);break;case-2:o&&o instanceof Function&&o(e.message);break;default:alert("未知输出："+JSON.stringify(e));break}},"string"==typeof e?window.KrScriptCore.executeShellAsync(e,"window.TaskSupervisorCallback",JSON.stringify(S({},n))):"boolean"==typeof e?!!e:""},extractAssets:function(e){return e&&"string"==typeof e&&window.KrScriptCore.extractAssets(e)||null},rootCheck:function(){return window.KrScriptCore.rootCheck()}};var C=new h["a"]({routes:k});new n["a"]({router:C,render:function(e){return e(v)}}).$mount("#app")},9793:function(e,t,i){"use strict";var o=i("e97e"),n=i.n(o);n.a},e97e:function(e,t,i){}});